<%- include('partials/header') %>
<%- include('navbar') %>

<iframe style="background: #21313C;border: none;margin-left:20px; margin-bottom:20px; margin-top:25px;border-radius: 15px;box-shadow: 0 2px 10px 0 rgba(70, 76, 79, .2);" width="470" height="340" src="https://charts.mongodb.com/charts-project-0-btbvr/embed/charts?id=986cdedf-e9e6-4fd0-affa-69abd10b539b&autoRefresh=3600&theme=dark"></iframe>
<iframe style="background: #21313C;border: none;margin-left:20px; margin-bottom:20px; margin-top:25px; border-radius: 15px;box-shadow: 0 2px 10px 0 rgba(70, 76, 79, .2);" width="470" height="340" src="https://charts.mongodb.com/charts-project-0-btbvr/embed/charts?id=bb4be7fa-a343-474c-b36a-ed68374d7b0f&theme=dark"></iframe>

  
<div class = "carHeader">
<h4> Current Car Inventory</h4>
</div>

<table class="table table-dark tableCarInventory">
  
    <thead>
      <tr>
        <th class = "idRowInTable" scope="col">ID</th>
        <th scope="col">Make</th>
        <th scope="col">Model</th>
        <th scope="col">Mileage</th>
        <th scope="col">Year</th>
        <th scope="col">Next Service</th>
        <th scop ="col">Delete</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class = "idRowInTable"> <% carItems.forEach(function(item){ %>
            <div class = "item">
              <p><%=item._id%></p> 
            </div>
          <% }); %>
        </td>
        <td> <% carItems.forEach(function(item){ %>
            <div class = "item">
              <p><%=item.make%></p> 
            </div>
         <% }); %>
        </td>
        <td> <% carItems.forEach(function(item){ %>
          <div class = "item">
            <p><%=item.model%></p> 
          </div>
       <% }); %>
      </td>
        <td> <% carItems.forEach(function(item){ %>
          <div class = "item">
            <p><%=item.current_mileage%></p> 
          </div>
         <% }); %>
        </td>
        <td> <% carItems.forEach(function(item){ %>
          <div class = "item"> 
          <p><%=item.year%></p>
          </div>
        <% }); %>
        </td>
        <td> <% carItems.forEach(function(item){ %>
          <div class = "item"> 
          <p><%=item.next_service%></p>
          </div>
        <% }); %>
        </td>
        <td> <% carItems.forEach(function(item){ %>
          <div class ="item">
                <button href="#myModal" type="button" name = "deleteButton" class="btn btn-danger deleteButton"  value = "<%carItems._id %>" data-toggle="modal" onChange="this.form.submit()">Delete</button>
          </div>
          <% }) %> 
          <!-- Form info -->
           <!-- Modal HTML -->
        <div id="myModal" class="modal fade">
          <div class="modal-dialog modal-confirm">
            <div class="modal-content">
              <div class="modal-header flex-column">
                <div class="icon-box">
                  <i class="material-icons">&#xE5CD;</i>
                </div>						
                <h4 class="modal-title w-100">Are you sure?</h4>	
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              </div>
              <div class="modal-body">
                <p>Do you really want to delete these records? This process cannot be undone.</p>
              </div>
              <div class="modal-footer justify-content-center">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                  <form action="/delete" method ="post">
                    <div class ="item">
                      <Button type="submit" class="btn btn-danger" name="deleteButton" value ="<%=carItems.make%>" onClick="this.form.submit()">Delete</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </td> 
      </tr>
    </tbody>
  </table>
  
  <a class="btn btn-dark btn-lg logoutButton" href="/logout" role="button">Log Out</a>
  <!-- <div class="midSection">
    test
  </div> -->

<%- include('partials/footer') %>